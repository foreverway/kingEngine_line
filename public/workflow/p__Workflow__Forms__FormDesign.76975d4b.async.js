(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"7U/N":function(e,t,a){"use strict";a.r(t);var n=a("rXjv"),l=a.n(n),r=(a("n3Pa"),a("SHRx")),o=(a("qDyL"),a("nwUc")),i=(a("zHCM"),a("im+1")),c=(a("EdcA"),a("rKq6")),s=a("mK77"),m=a.n(s),u=a("43Yg"),d=a.n(u),f=a("/tCh"),h=a.n(f),g=a("scpF"),p=a.n(g),y=a("O/V9"),v=a.n(y),b=a("8aBX"),C=a.n(b),E=a("OkUi"),w=a.n(E),k=a("t3Un"),N=(a("KCNJ"),a("rgLj")),S=a("LneV"),D=a("g17u"),O=a("achW"),z=a("Cew8"),R=a.n(z),x=a("IZfs"),A=a.n(x),T=a("iaV0"),P=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=p()(this,(e=v()(t)).call.apply(e,[this].concat(l))),a.state={boDetail:{},dataSource:[],scroll:{y:window.innerHeight-105}},a.onresizeListener=function(){return a.setState({scroll:{y:window.innerHeight-105}})},a.onDragStart=function(e,t){e.style={},t.dataTransfer.setData("Text",JSON.stringify(e))},a}return C()(t,e),h()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onresizeListener.bind(this));var e=document.getElementsByClassName("ant-table-header")[0];e.style.overflowY="hidden"}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onresizeListener.bind(this)),this.setState=function(){};var e=document.getElementsByClassName("ant-table-header")[0];e.style.overflowY=""}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataSource,n=t.scroll,l=this.props.loading,r=[{title:"\u8868\u5355\u5b57\u6bb5",dataIndex:"fieldName",align:"center",render:function(t,a){return w.a.createElement("span",{title:t,className:A.a.ellipsis,draggable:!0,onDragStart:function(t){return e.onDragStart(a,t)}},t)}}];return w.a.createElement(E["Fragment"],null,w.a.createElement(N["a"],{loading:l,rowKey:function(e){return e.fieldId},dataSource:a,columns:r,pagination:!1,scroll:n,size:"Middle",className:A.a.layoutContent}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return R()(e.boDetail,t.boDetail)?null:{boDetail:e.boDetail,dataSource:e.boDetail.columnsInfo}}}]),t}(E["Component"]),I=Object(D["o"])(Object(S["connect"])(O["a"],null,null,{withRef:!0})(P)),H=(a("2Kaa"),a("aLJi")),W=a("Tfcp"),_=a.n(W),F=a("3Uex"),J=a.n(F),M=a("7NM8"),B=a("OUSu"),L=a.n(B),j=(a("+86v"),a("riiF"),a("8wx/"),a("oOwq")),U=(a("xabt"),a("859Q")),X=(a("Ko87"),a("YB5O")),V=(a("Dd0U"),a("k/Tt")),K=(a("92Pl"),a("2+CA")),Y=(a("mlbU"),a("coPZ")),G=a("e1N5"),q=a("GGtV"),Z=a("OjYG"),Q=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=p()(this,(e=v()(t)).call.apply(e,[this].concat(l))),a.state={disabled:!1,style:{},className:"",formatPainter:!1,colorType:null,colorPickerStyle:{},visible:!1},a.clickListener=function(e){var t=Object(F["findDOMNode"])(a.colorPicker);t&&!t.contains(e.target)&&a.setState({visible:!1})},a.updateFormDesignFormat=function(e){var t=e.disabled,n=e.style,l=e.className,r=e.formatPainter;return a.setState({disabled:t,style:n,className:l,formatPainter:r})},a.openColorPicker=function(e,t){var n=e,l={zIndex:1e3,position:"fixed",lineHeight:"normal",top:t.clientY+15+"px",left:t.clientX+5+"px"};a.setState({colorType:n,colorPickerStyle:l,visible:!0})},a.onChangeComplete=function(e){var t=a.state,n=t.style,l=t.colorType;n[l]=e.hex,"borderColor"===l?a.setBorder("color",n[l]):a.changeStyle(l,n[l]),a.setState({style:n})},a.selectOnChange=function(e,t){var n=a.state.style;n[e]=t,a.changeStyle(e,n[e]),a.setState({style:n})},a.iconOnClick=function(e,t){var n=a.state.style;n[e]=n[e]?"":t,a.changeStyle(e,n[e]),a.setState({style:n})},a.changeStyle=function(e,t){var n=a.props.getHandsontable().hotInstance,l=n.getSelectedRange();if(l){var r=[];l.forEach(function(a){for(var l=a.to,o=a.from,i=o.row;i<=l.row;i++)for(var c=o.col;c<=l.col;c++){var s=n.getDataAtCell(i,c);s||(s=Z["a"].cell),s=JSON.parse(s),s.style[e]=t,r.push([i,c,JSON.stringify(s)])}}),n.setDataAtCell(r)}},a.executeCommand=function(e){var t=a.props.getHandsontable().hotInstance,n=t.getSelectedRange();if(n){var l=t.getPlugin("contextMenu"),r=n.map(function(e){return{start:e.from,end:e.to}});l.executeCommand(e,r)}},a.alignChange=function(e,t,n){var l=a.state.className;"horizontal"===e?(l=l.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ",""),l="".concat(l," ").concat(t)):"vertical"===e&&(l=l.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ",""),l="".concat(l," ").concat(t)),a.executeCommand(n),a.setState({className:l})},a.setColWidthOrRowHeight=function(e,t){var n,l,r=a.props.getHandsontable().hotInstance,o=r.getSelectedRange();if(o)if(o.forEach(function(t,a){var r=t.to,o=t.from;0===a?(n=o[e],l=r[e]):(o[e]<n&&(n=o[e]),r[e]<l&&(l=r[e]))}),"row"===e){for(var i=r.getPlugin("manualRowResize").manualRowHeights,c=n;c<=l;c++)i[c]=t;r.updateSettings({manualRowResize:i})}else if("col"===e){for(var s=r.getPlugin("manualColumnResize").manualColumnWidths,m=n;m<=l;m++)s[m]=t;r.updateSettings({manualColumnResize:s})}},a.setBorder=function(e,t){var n=a.props.getHandsontable().hotInstance,l=n.getPlugin("customBorders"),r=l.getBorders(n.getSelectedRange());r&&r.forEach(function(a){a.top[e]=t,a.right[e]=t,a.bottom[e]=t,a.left[e]=t,l.setBorders([[a.row,a.col]],{left:a.left,right:a.right,top:a.top,bottom:a.bottom})})},a}return C()(t,e),h()(t,[{key:"componentDidMount",value:function(){document.addEventListener("mouseup",this.clickListener.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.clickListener.bind(this))}},{key:"render",value:function(){var e=this,t=this.state,a=t.disabled,n=t.style,l=t.className,r=t.formatPainter,o=t.colorType,i=t.colorPickerStyle,c=t.visible,s=Z["a"].fonts,m=Z["a"].fontSize,u=Z["a"].alignment,d=Z["a"].clear,f=Z["a"].insert,h=Z["a"].border,g=Z["a"].borderWidths,p=s.map(function(e){return w.a.createElement(Y["a"].Option,{key:e.key,value:e.key},e.value)}),y=m.map(function(e){return w.a.createElement(Y["a"].Option,{key:e,value:e+"px"},e.toString())}),v=u.map(function(t){return w.a.createElement("li",{key:t.command,className:A.a.iconFont,style:{backgroundColor:-1!==l.indexOf(t.className)?"lightCyan":""}},w.a.createElement(q["a"],{type:t.icon,title:t.title,className:"icon-font-size",onClick:e.alignChange.bind(e,t.type,t.className,t.command)}))}),b=w.a.createElement(K["b"],{onClick:function(t){t.item;var a=t.key;return e.executeCommand(a)}},d.map(function(e){return w.a.createElement(K["b"].Item,{key:e.command},w.a.createElement(q["a"],{type:e.icon,className:"icon-font-size"}),e.title)})),C=w.a.createElement(K["b"],{onClick:function(t){t.item;var a=t.key;return e.executeCommand(a)}},f.map(function(e){return w.a.createElement(K["b"].Item,{key:e.command},w.a.createElement(q["a"],{type:e.icon,className:"icon-font-size"}),e.title)})),E=w.a.createElement(K["b"],{onClick:function(t){t.item;var a=t.key;return e.executeCommand(a)}},h.map(function(e){return w.a.createElement(K["b"].Item,{key:e.command},w.a.createElement(q["a"],{type:e.icon,className:"icon-font-size"}),e.title)})),k=g.map(function(e){return w.a.createElement(Y["a"].Option,{key:e,value:e},"\u7ebf\u5bbd".concat(e),w.a.createElement("span",{style:{width:30,marginLeft:"3px",display:"inline-block",borderBottom:"gray solid ".concat(e,"px")}}))});return w.a.createElement("div",{className:A.a["format-container"],id:"format-container"},w.a.createElement("ul",null,w.a.createElement("li",null,w.a.createElement(Y["a"],{allowClear:!0,size:"small",style:{width:65},placeholder:"\u5b57\u4f53",dropdownMatchSelectWidth:!1,value:n.fontFamily,onChange:function(t){return e.selectOnChange("fontFamily",t)}},p)),w.a.createElement("li",{title:"\u8bbe\u7f6e\u5b57\u4f53\u5927\u5c0f"},w.a.createElement(Y["a"],{allowClear:!0,size:"small",style:{width:55},placeholder:"\u5b57\u4f53\u5927\u5c0f",dropdownMatchSelectWidth:!1,value:n.fontSize,onChange:function(t){return e.selectOnChange("fontSize",t)}},y)),w.a.createElement("li",{className:A.a.iconFont,style:{backgroundColor:"bold"===n.fontWeight?"lightCyan":""}},w.a.createElement(q["a"],{title:"\u7c97\u4f53",type:"icon-cuti",className:"icon-font-size",onClick:this.iconOnClick.bind(this,"fontWeight","bold")})),w.a.createElement("li",{className:A.a.iconFont,style:{backgroundColor:"italic"===n.fontStyle?"lightCyan":""}},w.a.createElement(q["a"],{title:"\u659c\u4f53",type:"icon-xieti",className:"icon-font-size",onClick:this.iconOnClick.bind(this,"fontStyle","italic")})),w.a.createElement("li",{className:A.a.iconFont,style:{backgroundColor:n.backgroundColor?n.backgroundColor:null}},w.a.createElement(q["a"],{title:"\u80cc\u666f\u8272",type:"icon-beijingyanse",className:"icon-font-size",onClick:this.openColorPicker.bind(this,"backgroundColor")})),w.a.createElement("li",{className:A.a.iconFont,style:{backgroundColor:n.color?n.color:null}},w.a.createElement(q["a"],{title:"\u5b57\u4f53\u989c\u8272",type:"icon-font-colors",className:"icon-font-size",onClick:this.openColorPicker.bind(this,"color")})),w.a.createElement("li",{className:A.a.iconFont,style:{backgroundColor:r?"lightCyan":""}},w.a.createElement(q["a"],{title:"\u683c\u5f0f\u5237",type:"icon-711bianjiqi_geshishua",className:"icon-font-size",onClick:function(){return e.setState({formatPainter:!e.state.formatPainter})}})),w.a.createElement("li",{className:A.a.iconFont,style:{backgroundColor:a?"lightCyan":""}},w.a.createElement(q["a"],{title:"\u53ea\u8bfb",type:"icon-hide",className:"icon-font-size",onClick:this.executeCommand.bind(this,"disabled")})),w.a.createElement("li",{className:A.a.iconFont},w.a.createElement(q["a"],{title:"\u5408\u5e76/\u53d6\u6d88\u5408\u5e76\u5355\u5143\u683c",type:"icon-hebingdanyuange",className:"icon-font-size",onClick:this.executeCommand.bind(this,"mergeCells")})),v,w.a.createElement("li",null,w.a.createElement(U["a"],{overlay:b,trigger:["hover","click"]},w.a.createElement(X["a"],{size:"small"},"\u6e05\u9664 ",w.a.createElement(V["a"],{type:"down"})))),w.a.createElement("li",null,w.a.createElement(U["a"],{overlay:C,trigger:["hover","click"]},w.a.createElement(X["a"],{size:"small"},"\u884c/\u5217\u589e\u5220 ",w.a.createElement(V["a"],{type:"down"})))),w.a.createElement("li",null,w.a.createElement(j["a"],{size:"small",placeholder:"\u5217\u5bbd",style:{width:50},onPressEnter:function(t){var a=t.target.value;a>0&&e.setColWidthOrRowHeight("col",parseInt(t.target.value,10))}})),w.a.createElement("li",null,w.a.createElement(j["a"],{size:"small",placeholder:"\u884c\u9ad8",style:{width:50},onPressEnter:function(t){var a=t.target.value;a>0&&e.setColWidthOrRowHeight("row",parseInt(t.target.value,10))}})),w.a.createElement("li",null,w.a.createElement(U["a"],{overlay:E,trigger:["hover","click"]},w.a.createElement(X["a"],{size:"small"},"\u8fb9\u6846 ",w.a.createElement(V["a"],{type:"down"})))),w.a.createElement("li",{className:A.a.iconFont},w.a.createElement(q["a"],{title:"\u8fb9\u6846\u989c\u8272",type:"icon-font-colors",className:"icon-font-size",onClick:this.openColorPicker.bind(this,"borderColor")})),w.a.createElement("li",null,w.a.createElement(Y["a"],{allowClear:!0,size:"small",style:{width:90},placeholder:"\u8fb9\u6846\u5bbd\u5ea6",onChange:function(t){return e.setBorder("width",t)}},k))),c&&w.a.createElement("div",{style:i,ref:function(t){return e.colorPicker=t}},w.a.createElement(G["SketchPicker"],{color:n[o],onChangeComplete:this.onChangeComplete})))}}]),t}(E["Component"]),$=Object(S["connect"])(O["a"],null,null,{withRef:!0})(Q),ee=a("ekcT"),te=a.n(ee),ae=function(e){function t(){return d()(this,t),p()(this,v()(t).apply(this,arguments))}return C()(t,e),h()(t,[{key:"createElements",value:function(){te()(v()(t.prototype),"createElements",this).call(this),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("placeholder","Custom placeholder"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,L.a.dom.empty(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}},{key:"setValue",value:function(e){if(this.originalValue){var t=JSON.parse(this.originalValue),a=t.fieldName;a&&(this.TEXTAREA.value=a)}}},{key:"getValue",value:function(){var e=Z["a"].cell;if(this.TEXTAREA.value){var t=JSON.parse(e);return this.originalValue&&(t=JSON.parse(this.originalValue)),t.fieldName=this.TEXTAREA.value,JSON.stringify(t)}return e}}]),t}(L.a.editors.TextEditor),ne=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=p()(this,(e=v()(t)).call.apply(e,[this].concat(l))),a.onDragOver=function(e){return e.preventDefault()},a.onDrop=function(e){e.preventDefault();var t=a.props,n=t.handsontable,l=t.row,r=t.col,o=e.dataTransfer.getData("Text"),i=n.hotInstance.getDataAtCell(l,r);i?(o=JSON.parse(o),o.style=JSON.parse(i).style,n.hotInstance.setDataAtCell(l,r,JSON.stringify(o))):n.hotInstance.setDataAtCell(l,r,o)},a}return C()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.td;t.ondragover=function(t){return e.onDragOver(t)},t.ondrop=function(t){return e.onDrop(t)}}},{key:"render",value:function(){var e=this.props.value,t=Z["a"].fieldTypeIcon;return w.a.createElement(E["Fragment"],null,e&&e.fieldType&&"no"!==e.fieldType&&w.a.createElement(q["a"],{type:t[e.fieldType],className:"icon-font-size"}),e&&e.fieldName)}}]),t}(E["Component"]),le=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=p()(this,(e=v()(t)).call.apply(e,[this].concat(l))),a.state={mergeCells:[]},a.updateHandsontable=function(e){var t=a.handsontable.hotInstance;a.setState({mergeCells:e.mergeCells}),delete e.mergeCells,t.updateSettings(e)},a.renderer=function(e,t,n,l,r,o,i){var c=Z["a"].cell;if(o){try{o=JSON.parse(o)}catch(e){var s=JSON.parse(c);s.fieldName=o,o=s}var m=o,u=m.style;u&&u.color&&(t.style.color=u.color),u&&u.fontSize&&(t.style.fontSize=u.fontSize),u&&u.fontStyle&&(t.style.fontStyle=u.fontStyle),u&&u.fontWeight&&(t.style.fontWeight=u.fontWeight),u&&u.fontFamily&&(t.style.fontFamily=u.fontFamily),u&&u.backgroundColor&&(t.style.background=u.backgroundColor),i.className&&(t.className=i.className)}return J.a.render(w.a.createElement(ne,{handsontable:a.handsontable,td:t,row:n,col:l,value:o}),t),t},a.contextMenu=function(){var e=_()(a);return{items:{row_above:{},row_below:{},separator:L.a.plugins.ContextMenu.SEPARATOR,col_left:{},col_right:{},"---------":{},remove_row:{},remove_col:{},separator1:{name:"---------"},clear:{name:"\u6e05\u9664",submenu:{items:[{key:"clear:clear_content",name:"\u6e05\u9664\u5185\u5bb9"},{key:"clear:clear_format",name:"\u6e05\u9664\u683c\u5f0f"},{key:"clear:clear_column_and_format",name:"\u6e05\u9664\u5185\u5bb9\u548c\u683c\u5f0f"}]}},alignment:{},separator5:{name:"---------"},borders:{},bordersAll:{name:"\u8fb9\u6846-\u5168",key:"bordersAll",hidden:function(){return!0},callback:function(e,t,a){var n=this.getPlugin("contextMenu");n.executeCommand("borders:no_borders",t),n.executeCommand("borders:top",t),n.executeCommand("borders:right",t),n.executeCommand("borders:bottom",t),n.executeCommand("borders:left",t)}},separator7:{name:"---------"},mergeCells:{},separator8:{name:"---------"},disabled:{name:"\u53ea\u8bfb",key:"disabled",hidden:function(){return!0}}},callback:function(t,a,n){var l=this;switch(t){case"clear:clear_content":case"clear:clear_format":case"clear:clear_column_and_format":case"disabled":var r=[];a.forEach(function(e){for(var a=e.start.row;a<=e.end.row;a++)for(var n=e.start.col;n<=e.end.col;n++){var o=l.getDataAtCell(a,n);o=JSON.parse(o),o&&("clear:clear_content"!==t&&"clear:clear_column_and_format"!==t||(o={style:o.style}),"clear:clear_format"!==t&&"clear:clear_column_and_format"!==t||(o.style={},l.removeCellMeta(a,n,"className")),"disabled"===t&&(o.disabled=!o.disabled),r.push([a,n,JSON.stringify(o)]))}}),this.setDataAtCell(r);break;default:break}-1===t.indexOf("alignment")&&-1===t.indexOf("clear:clear_format")&&-1===t.indexOf("clear:clear_column_and_format")&&-1===t.indexOf("disabled")||e.afterSelectionEnd()}}},a.afterSelectionEnd=function(e,t,n,l,r,o){var i=a.handsontable.hotInstance,c=i.getSelectedRange();if(c){var s=[],u=a.formDesignFormat.getWrappedInstance(),d=u.state;c.forEach(function(e){for(var t=e.to,a=e.from,n=a.row;n<=t.row;n++)for(var l=a.col;l<=t.col;l++){var r=i.getDataAtCell(n,l);d.formatPainter&&r&&(r=JSON.parse(r),r.style=m()({},d.style),s.push([n,l,JSON.stringify(r)]))}}),d.formatPainter&&i.setDataAtCell(s);var f=i.getSelectedLast(),h=i.getCellMeta(f[0],f[1]),g=i.getDataAtCell(f[0],f[1]);if(g){g=JSON.parse(g);var p=g,y=p.style,v=p.disabled,b=h.className;u.updateFormDesignFormat({disabled:v,style:y||{},className:b,formatPainter:!1})}else u.updateFormDesignFormat({disabled:!1,style:{},className:"",formatPainter:!1})}},a.beforePaste=function(e,t){var a=Z["a"].cell;e.forEach(function(t,n){return t.forEach(function(t,l){try{JSON.parse(t)}catch(o){var r=JSON.parse(a);r.fieldName=t,e[n][l]=JSON.stringify(r)}})})},a.afterUnmergeCells=function(e,t){var n=a.state.mergeCells;n.length=0;var l=a.handsontable.hotInstance.getPlugin("mergeCells");l.mergedCellsCollection.mergedCells.forEach(function(e){return n.push(e)})},a.afterChange=function(e,t){if("MergeCells"===t){var n=a.state.mergeCells;n.length=0;var l=a.handsontable.hotInstance.getPlugin("mergeCells");l.mergedCellsCollection.mergedCells.forEach(function(e){return n.push(e)})}},a}return C()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=Z["a"].breakpoint,t=this.handsontable.hotInstance;window.onresize=function(){var a=window.innerHeight-document.getElementById("format-container").offsetHeight,n=window.innerWidth>e?window.innerWidth-200:window.innerWidth;t.updateSettings({height:a,width:n})},L.a.editors.registerEditor("customEditor",ae);var a=window.innerHeight-document.getElementById("format-container").offsetHeight,n=window.innerWidth>e?window.innerWidth-200:window.innerWidth;t.updateSettings({height:a,width:n})}},{key:"componentWillUnmount",value:function(){window.onresize=null}},{key:"render",value:function(){var e=this,t=this.props.loading,a=this.state.mergeCells,n=Z["a"].row,l=Z["a"].col,r=Z["a"].rowHeight,o=Z["a"].colWidth,i=Z["a"].className;return w.a.createElement(H["a"],{spinning:t},w.a.createElement($,{getHandsontable:function(){return e.handsontable},ref:function(t){return e.formDesignFormat=t}}),w.a.createElement(M["HotTable"],{id:"hot",ref:function(t){return e.handsontable=t},colHeaders:!0,rowHeaders:!0,manualColumnResize:!0,manualRowResize:!0,manualColumnFreeze:!0,startRows:n,startCols:l,colWidths:o,rowHeights:r,stretchH:"all",language:"zh-CN",contextMenu:this.contextMenu(),outsideClickDeselects:!1,selectionMode:"multiple",mergeCells:a,undo:!0,customBorders:!0,editor:"customEditor",renderer:this.renderer,className:i,afterSelectionEnd:this.afterSelectionEnd,beforePaste:this.beforePaste,afterUnmergeCells:this.afterUnmergeCells,afterChange:this.afterChange}))}}]),t}(E["Component"]),re=Object(S["connect"])(O["a"],null,null,{withRef:!0})(le),oe=a("p9Yr"),ie=a("ZhYS"),ce=a.n(ie),se=(a("L7jA"),a("KVln")),me=function(e){var t=e.save,a=e.preview,n=e.data;return w.a.createElement(E["Fragment"],null,w.a.createElement("div",{className:A.a.headerTitle},n.formName?n.formName:""),w.a.createElement("div",{className:A.a.btnGroup},w.a.createElement(X["a"],{type:"primary",shape:"circle",title:"\u4fdd\u5b58",onClick:t},w.a.createElement(q["a"],{type:"icon-ico-save"})),w.a.createElement(se["a"],{type:"vertical",className:A.a.layoutHeaderDivider}),w.a.createElement(X["a"],{type:"primary",shape:"circle",title:"\u9884\u89c8",onClick:a},w.a.createElement(V["a"],{type:"eye-o"}))),w.a.createElement(X["a"],{type:"primary",shape:"circle",title:"\u5173\u95ed",className:A.a.layoutHeaderClose,onClick:function(){return Object(T["a"])("/workflow/processDev/formPage/template?type=edit")}},w.a.createElement(q["a"],{type:"icon-close1"})))},ue=me;a.d(t,"default",function(){return de});var de=function(e){function t(){var e,a;d()(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=p()(this,(e=v()(t)).call.apply(e,[this].concat(l))),a.state={formDetail:{},boDetail:{},componentData:[],visible:!1},a.init=function(e,t){Object(k["d"])("/form/formDetail",{formId:e}).then(function(e){var n=e.resultData;Object(k["d"])("/bo/boDetail",{boKey:decodeURI(t)},"GET").then(function(e){var t=e.resultData;t&&(t.columnsInfo=JSON.parse(t.columnsInfo));var l=n.template,r=n.templateColumnNumber,o=a.formDesignHandsontable.getWrappedInstance();if(n.metaInfo)o.updateHandsontable(JSON.parse(n.metaInfo));else if(l){var i={templateColumnNumber:r,columnsInfo:t.columnsInfo};o.updateHandsontable({data:Z["a"].getInitData(i),mergeCells:[]})}a.setState({formDetail:n,boDetail:t})})})},a.save=function(){var e=JSON.stringify(a.handsontableData),t=m()({},a.state.formDetail,{metaInfo:e});Object(k["d"])("/form/updateForm",t).then(function(){return c["a"].success("\u66f4\u65b0\u6210\u529f")})},a.preview=function(){return a.setState({visible:!0,componentData:a.handsontableData})},a}return C()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this.props.location.search,t=ce()(e),a=t.formId,n=t.boKey;this.init(a,n);var l=document.getElementsByClassName("ant-table-content")[0];l.style.borderTop="none"}},{key:"componentWillUnmount",value:function(){var e=document.getElementsByClassName("ant-table-content")[0];e.style.borderTop="1px solid #e8e8e8"}},{key:"render",value:function(){var e=this,t=this.state,a=t.boDetail,n=t.visible,l=t.formDetail;return w.a.createElement(i["a"],{className:A.a.layoutWrapper},w.a.createElement(i["a"].Header,{className:A.a.layoutHeader},w.a.createElement(ue,{save:this.save,preview:this.preview,data:l})),w.a.createElement(i["a"],{className:A.a.layoutSub},w.a.createElement(i["a"].Sider,{breakpoint:"md",collapsedWidth:"0",className:A.a.layoutSider},w.a.createElement(I,{boDetail:a})),w.a.createElement(i["a"].Content,{className:A.a.layoutContent},w.a.createElement(re,{ref:function(t){return e.formDesignHandsontable=t}}),w.a.createElement(r["a"],{visible:n,title:"\u8868\u5355\u9875\u9762\u9884\u89c8",footer:null,destroyOnClose:!0,maskClosable:!1,onOk:function(){return e.setState({visible:!1})},onCancel:function(){return e.setState({visible:!1})},bodyStyle:{padding:0,height:"calc(100% - 55px)",overflow:"auto"},wrapClassName:"fullScreen"},w.a.createElement(o["a"],{type:"flex",justify:"center"},w.a.createElement(oe["a"],{componentData:this.state.componentData}))))))}},{key:"handsontableData",get:function(){var e=this.formDesignHandsontable.getWrappedInstance().handsontable.hotInstance,t=e.getData(),a=l()(e.getCellsMeta());a=a.filter(function(e){return!!e}),a.forEach(function(e){return delete e.instance});var n=e.getSettings().colWidths,r=e.getSettings().rowHeights,o=e.getPlugin("customBorders").getBorders(),i=e.getPlugin("manualRowResize").manualRowHeights,c=e.getPlugin("manualColumnResize").manualColumnWidths,s=e.getSettings().mergeCells;return{data:t,cell:a,colWidths:n,rowHeights:r,manualRowResize:i,manualColumnResize:c,mergeCells:s,customBorders:o}}}]),t}(E["Component"])}}]);