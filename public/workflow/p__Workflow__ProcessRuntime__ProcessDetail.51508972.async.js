(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{zxKT:function(e,t,a){"use strict";a.r(t);a("n3Pa");var r=a("SHRx"),n=(a("EP3h"),a("7BOI")),o=(a("qDyL"),a("nwUc")),s=(a("EdcA"),a("rKq6")),i=a("mK77"),c=a.n(i),l=a("43Yg"),m=a.n(l),d=a("/tCh"),u=a.n(d),p=a("scpF"),f=a.n(p),h=a("O/V9"),v=a.n(h),y=a("8aBX"),b=a.n(y),k=a("OkUi"),I=a.n(k),g=a("LneV"),D=a("t3Un"),E=a("achW"),S=a("p9Yr"),F=(a("xabt"),a("859Q")),T=(a("Dd0U"),a("k/Tt")),C=(a("Ko87"),a("YB5O")),O=(a("L7jA"),a("KVln")),j=(a("Hvxc"),a("Ft10")),w=(a("92Pl"),a("2+CA")),R=(a("n1kd"),a("u7ct")),A=(a("2Kaa"),a("aLJi")),P=(a("tTkr"),a("h55b")),L=(a("lTNl"),a("GgXD")),B=(a("/ySr"),a("F0ZO")),x=(a("myUV"),a("swlU")),M=(a("SazW"),a("Q2Fu")),H=(a("3RBR"),a("20J0")),N=a("C6Ec"),U=a.n(N),_=function(e){function t(){var e,a;m()(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return a=f()(this,(e=v()(t)).call.apply(e,[this].concat(n))),a.state={historyCommentData:[]},a}return b()(t,e),u()(t,[{key:"historyComment",value:function(e){var t=this;e&&Object(D["d"])("/history/historyCommentList",{processInstanceId:this.props.processInstanceId},"GET").then(function(e){return t.setState({historyCommentData:e.resultData})})}},{key:"render",value:function(){var e=this,t=["#f56a00","#7265e6","#ffbf00","#00a2ae"],a={agree_comment:"#87d068",disagree_comment:"#f50",rollback_comment:"#2db7f5",rollback_last_comment:"#B875F5",rollback_start_comment:"#cec80b"},r={agree_comment:"\u5ba1\u6279\u540c\u610f",disagree_comment:"\u5ba1\u6279\u4e0d\u540c\u610f",rollback_comment:"\u9000\u56de",rollback_last_comment:"\u9000\u56de",rollback_start_comment:"\u9a73\u56de"},n=this.state.historyCommentData.map(function(n,o){var s=Math.floor(4*Math.random());return I.a.createElement(P["a"].Item,{color:a[n.type],key:o},I.a.createElement(B["a"],null,I.a.createElement(L["a"],{loading:e.props.loading,avatar:!0,active:!0},I.a.createElement(B["a"].Meta,{avatar:I.a.createElement(H["a"],{style:{backgroundColor:t[s],verticalAlign:"middle"},size:"large"},n.userName),title:I.a.createElement("span",null,n.taskName,I.a.createElement(x["a"],{title:r[n.type]},I.a.createElement(M["a"],{color:a[n.type]},"#",r[n.type]))),description:I.a.createElement("span",{dangerouslySetInnerHTML:{__html:n.message}})}))))}),o=this.state.historyCommentData.length>0?I.a.createElement(P["a"],null,n):I.a.createElement(A["a"],{spinning:this.props.loading},I.a.createElement("div",{className:U.a.noHistoryComment},"\u6682\u65e0\u5ba1\u6279\u5386\u53f2"));return I.a.createElement(R["a"],{content:o,trigger:"click",overlayClassName:U.a.popover,placement:"bottom",onVisibleChange:this.historyComment.bind(this)},I.a.createElement(C["a"],null,"\u5ba1\u6279\u5386\u53f2"))}}]),t}(k["Component"]),G=Object(g["connect"])(E["a"])(_),K=a("2R7m"),q=a.n(K),J=function(e){function t(){return m()(this,t),f()(this,v()(t).apply(this,arguments))}return b()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.activeKey,r=e.from,n=e.startFlag,s=e.canRevocation,i=e.processInstanceId,c=e.tabClick,l=e.submit,m=e.save,d=e.recall,u=e.goBack,p=e.handleMenuClick,f=e.cc,h=e.assistStrategy,v=e.rejectStrategy,y=e.handover,b=e.rollbackStrategy,g=e.approval,D=b||y||f||h||v?I.a.createElement(w["b"],{onClick:p.bind(this)},f&&I.a.createElement(w["b"].Item,{key:"carbonCopy"},"\u6284\u9001"),y&&I.a.createElement(w["b"].Item,{key:"handover"},"\u79fb\u4ea4"),b&&I.a.createElement(w["b"].Item,{key:"rollBack"},"\u9000\u56de"),h&&I.a.createElement(w["b"].Item,{key:"assist"},"\u534f\u52a9"),v&&I.a.createElement(w["b"].Item,{key:"reject"},"\u9a73\u56de")):I.a.createElement(w["b"],null,I.a.createElement(w["b"].Item,{key:"none",id:"pro-detail-header-none"},"\u65e0"));return I.a.createElement("div",{className:U.a["process-detail-head"]},I.a.createElement(o["a"],{type:"flex",justify:"space-between",align:"middle"},I.a.createElement(j["a"],null,I.a.createElement("img",{src:q.a,alt:"logo"}))),I.a.createElement("div",{className:U.a["process-detail-head-content"]},I.a.createElement(o["a"],null,I.a.createElement("h3",null,t)),I.a.createElement(o["a"],{type:"flex",justify:"space-between",align:"middle"},I.a.createElement(j["a"],null,I.a.createElement("span",{className:"0"===a?"".concat(U.a["process-detail-head-content-tab"]," ").concat(U.a["process-detail-head-content-tab-active"]):U.a["process-detail-head-content-tab"],onClick:c.bind(this,"0")},"\u6d41\u7a0b\u8868\u5355"),I.a.createElement(O["a"],{type:"vertical"}),I.a.createElement("span",{className:"1"===a?"".concat(U.a["process-detail-head-content-tab"]," ").concat(U.a["process-detail-head-content-tab-active"]):U.a["process-detail-head-content-tab"],onClick:c.bind(this,"1")},"\u6d41\u7a0b\u56fe")),I.a.createElement(j["a"],null,I.a.createElement(C["a"].Group,null,"detail"!==r&&"carbonCopyDetail"!==r&&I.a.createElement(k["Fragment"],null,I.a.createElement(C["a"],{onClick:l.bind(this)},"todo"!==r||n?"\u63d0\u4ea4":"\u5ba1\u6279"),I.a.createElement(C["a"],{onClick:m.bind(this)},"\u6682\u5b58")),("todo"===r||"detail"===r||"carbonCopyDetail"===r)&&I.a.createElement(G,{processInstanceId:i}),("todo"===r||"detail"===r)&&I.a.createElement(C["a"],{onClick:g.bind(this)},"\u5ba1\u6279\u73af\u8282"),!n&&"todo"===r&&I.a.createElement(F["a"],{overlay:D,placement:"bottomRight"},I.a.createElement(C["a"],null,I.a.createElement(T["a"],{type:"ellipsis"}))),"detail"===r&&s&&I.a.createElement(C["a"],{onClick:d.bind(this)},"\u64a4\u56de")),I.a.createElement(C["a"],{type:"primary",onClick:u.bind(this),style:{marginLeft:"8px"}},"\u5173\u95ed")))))}}]),t}(k["Component"]),V=(a("ZS9L"),a("W38+")),z=a("zAuD"),Y=a.n(z),Z=a("CRv0"),W=a.n(Z),X=(a("wib1"),a("OjYG")),Q=function(e){function t(){return m()(this,t),f()(this,v()(t).apply(this,arguments))}return b()(t,e),u()(t,[{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,a=X["a"].controls,r={labelCol:{span:4},wrapperCol:{span:19}};return I.a.createElement(V["a"],null,I.a.createElement(V["a"].Item,Y()({label:"\u610f\u89c1"},r),t("comment",{validateTrigger:"onBlur",rules:[{required:!0,validator:function(e,t,a){t.isEmpty()?a("\u8bf7\u8f93\u5165\u5ba1\u6279\u610f\u89c1"):a()}},{max:255,validator:function(e,t,a){t.toText().length>255?a("\u6700\u5927\u957f\u5ea6\u4e3a255"):a()}}]})(I.a.createElement(W.a,{className:U.a["braft-editor"],controls:a,placeholder:"\u8bf7\u8f93\u5165\u5ba1\u6279\u610f\u89c1"}))))}}]),t}(k["Component"]),$=V["a"].create()(Q),ee=(a("mlbU"),a("coPZ")),te=a("PvHZ"),ae=function(e){function t(){var e,a;m()(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return a=f()(this,(e=v()(t)).call.apply(e,[this].concat(n))),a.state={userList:[]},a}return b()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this;Object(D["d"])("/user/userList",null,"GET").then(function(t){return e.setState({userList:t.resultData})})}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.type,r=e.assistStrategy,n=t.getFieldDecorator,o=te["a"].formItemLayout,s=this.state.userList.map(function(e){return I.a.createElement(ee["a"].Option,{key:e.userId,value:e.userId},e.userName,"---",e.userId)}),i=r?I.a.createElement("span",null,a+"\u4eba","\xa0",I.a.createElement(x["a"],{title:"\u534f\u52a9\u7b56\u7565\u4e3a\uff1a".concat(te["a"].assistStrategy[r])},I.a.createElement(T["a"],{type:"question-circle-o",style:{color:"blue"}}))):"".concat(a,"\u4eba");return I.a.createElement(A["a"],{spinning:this.props.loading},I.a.createElement(V["a"],null,I.a.createElement(V["a"].Item,Y()({label:i},o,{hasFeedback:!0}),n("delegateUserId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9"+a+"\u4eba"}]})(I.a.createElement(ee["a"],{showSearch:!0,placeholder:"\u8bf7\u9009\u62e9"+a+"\u4eba",filterOption:function(e,t){return t.props.children.join("").toLowerCase().indexOf(e.toLowerCase())>=0},mode:"\u6284\u9001"===a?"multiple":""},s)))))}}]),t}(k["Component"]),re=Object(g["connect"])(E["a"])(V["a"].create()(ae)),ne=(a("8wx/"),a("oOwq")),oe=function(e){function t(){var e,a;m()(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return a=f()(this,(e=v()(t)).call.apply(e,[this].concat(n))),a.state={historyActivityList:[]},a}return b()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.type;"\u9a73\u56de"===t?Object(D["d"])("/task/rejectSubmitActivities",{taskId:this.props.taskId},"GET").then(function(t){return e.setState({historyActivityList:t.resultData})}):Object(D["d"])("/task/historyActivityList",{taskId:this.props.taskId},"GET").then(function(t){return e.setState({historyActivityList:t.resultData})})}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.type,r=e.rejectStrategy,n=t.getFieldDecorator,o=te["a"].formItemLayout,s=this.state.historyActivityList.map(function(e){return I.a.createElement(ee["a"].Option,{key:e.activityId,value:e.activityId},e.activityName)}),i="\u9a73\u56de"===a?I.a.createElement("span",null,"\u8df3\u8f6c\u8282\u70b9\xa0",I.a.createElement(x["a"],{title:"".concat(te["a"].rejectStrategy[r])},I.a.createElement(T["a"],{type:"question-circle-o",style:{color:"blue"}}))):"\u9000\u56de\u8282\u70b9";return I.a.createElement(A["a"],{spinning:this.props.loading},I.a.createElement(V["a"],null,I.a.createElement(V["a"].Item,Y()({label:i},o,{hasFeedback:!0}),n("desActivityId",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8282\u70b9"}]})(I.a.createElement(ee["a"],{showSearch:!0,placeholder:"\u8bf7\u9009\u62e9\u8282\u70b9",filterOption:function(e,t){return t.props.children&&t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},s))),"\u9a73\u56de"!==a&&I.a.createElement(V["a"].Item,Y()({label:"\u539f\u56e0"},o,{hasFeedback:!0}),n("reason",{rules:[{max:255,message:"\u6700\u5927\u957f\u5ea6\u4e3a255"}]})(I.a.createElement(ne["a"].TextArea,{placeholder:"\u8bf7\u8f93\u5165\u539f\u56e0",autosize:{minRows:2,maxRows:6}})))))}}]),t}(k["Component"]),se=Object(g["connect"])(E["a"])(V["a"].create()(oe)),ie=a("ZhYS"),ce=a.n(ie),le=(a("KCNJ"),a("rgLj")),me=a("gdd3"),de=function(e){var t=e.dataSource,a=e.visible,n=e.onCancel,o=[{title:"\u4efb\u52a1\u540d\u79f0",dataIndex:"name",width:"15%"},{title:"\u7ecf\u529e\u4eba",dataIndex:"assigneeName"},{title:"\u63a5\u6536\u65f6\u95f4",dataIndex:"startTime",render:function(e){return I.a.createElement(k["Fragment"],null,e&&me["a"]," ",e)}},{title:"\u7ed3\u675f\u65f6\u95f4",dataIndex:"endTime",render:function(e){return I.a.createElement(k["Fragment"],null,e&&me["a"]," ",e)}},{title:"\u5904\u7406\u65f6\u95f4",dataIndex:"durationTime"}];return I.a.createElement(r["a"],{visible:a,title:"\u5ba1\u6279\u73af\u8282",maskClosable:!1,centered:!0,width:1e3,bodyStyle:{padding:0},footer:null,onCancel:n},I.a.createElement("div",{style:{margin:"7px"}},I.a.createElement(le["a"],{dataSource:t,columns:o,pagination:{defaultPageSize:10}})))},ue=de,pe=a("oPA2"),fe=a("j/cj"),he=function(e){function t(){var e,a;m()(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return a=f()(this,(e=v()(t)).call.apply(e,[this].concat(n))),a.state={formType:-1,formId:null,componentData:{},formData:{},activityId:null,canRevocation:!1,comment:null,commentId:null,startFlag:!1,title:null,imgUrl:null,imgData:[],activeKey:"0",areaAlert:{},areaAlertStyle:{},visibleForAreaAlert:!1,visibleForSubmit:!1,visibleForRollback:!1,visibleForHandover:!1,visibleForCarbonCopy:!1,visibleForAssist:!1,visibleForReject:!1,cc:"",assistStrategy:"",rejectStrategy:"",rejected:"",handover:"",rollbackStrategy:"",visibleApproval:!1,approvalData:[],processImgData:[]},a.tabClick=function(e){if(a.setState({activeKey:e}),"1"===e){var t=a.state,r=t.imgData,n=t.processImgData;new pe["a"]("imageParent","processImage",n,r).generateImage()}else{var o=document.getElementById("processImage");document.getElementById("imageParent").removeChild(o)}},a.approval=function(){a.setState({visibleApproval:!0})},a.onCancelProcessApproval=function(){a.setState({visibleApproval:!1})},a}return b()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props.location.search,t=ce()(e);this.setState(c()({},t)),"start"!==t.from&&"draft"!==t.from||(this.processDetail(t.processDefinitionId),t.draftId&&this.draftDetail(t.draftId),this.processDiagram(t.processDefinitionId)),"todo"!==t.from&&"detail"!==t.from&&"carbonCopyDetail"!==t.from||(t.taskId?this.taskDetail(t.taskId):this.processInstanceDetail(t.processInstanceId),this.instanceDiagram(t.processInstanceId),this.instanceDiagramData(t.processInstanceId)),"todo"!==t.from&&"detail"!==t.from||this.getProcessApprovalData(t.processInstanceId)}},{key:"getProcessApprovalData",value:function(e){var t=this;Object(D["d"])("/history/proInstanceTasks?processInstanceId=".concat(e),{userId:Object(fe["a"])("userId")},"GET").then(function(e){t.setState({approvalData:e.resultData})})}},{key:"processDetail",value:function(e){var t=this;Object(D["d"])("/process/processFormDetail",{processDefinitionId:decodeURI(e)},"GET").then(function(e){0===e.resultData.formType?t.setState({componentData:JSON.parse(e.resultData.formMetaInfo),formId:e.resultData.formId,formType:e.resultData.formType,title:e.resultData.processDefinitionName}):1===e.resultData.formType&&t.setState({componentData:e.resultData.formMetaInfo,formType:e.resultData.formType})})}},{key:"draftDetail",value:function(e){var t=this;Object(D["d"])("/process/draftDetail",{draftId:decodeURI(e)},"GET").then(function(e){t.setState({formData:e.resultData.formDatas}),console.log(e.resultData.formDatas),t.formDesignRender&&t.formDesignRender.init()})}},{key:"taskDetail",value:function(e){var t=this;Object(D["d"])("/task/taskFormDetail",{taskId:decodeURI(e)},"GET").then(function(e){var a=e.resultData?e.resultData:{};0===e.resultData.formType?t.setState({componentData:JSON.parse(a.formMetaInfo),formData:a.formDatas,formId:a.formId,formType:a.formType,comment:a.comment,commentId:a.commentId,startFlag:a.startFlag,title:a.processInstanceName,cc:a.cc,assistStrategy:a.assistStrategy,rejectStrategy:a.rejectStrategy,rejected:a.rejected,handover:a.handover,rollbackStrategy:a.rollbackStrategy}):1===a.formType&&t.setState({componentData:a.formMetaInfo,formType:a.formType})})}},{key:"processInstanceDetail",value:function(e){var t=this;Object(D["d"])("/history/processInstanceDetail",{processInstanceId:decodeURI(e),userId:Object(fe["a"])("userId")},"GET").then(function(e){0===e.resultData.formType?t.setState({componentData:JSON.parse(e.resultData.formMetaInfo),formData:e.resultData.formDatas,formType:e.resultData.formType,title:e.resultData.processInstanceName,activityId:e.resultData.activityId,canRevocation:e.resultData.canRevocation}):1===e.resultData.formType&&t.setState({componentData:e.resultData.formMetaInfo,formType:e.resultData.formType})})}},{key:"processDiagram",value:function(e){var t=this;Object(D["d"])("/coordinate/processDefinition",{processDefinitionId:decodeURI(e)},"GET").then(function(e){return t.setState({processImgData:e.resultData?e.resultData:{}})})}},{key:"instanceDiagram",value:function(e){var t=this;Object(D["d"])("/coordinate/processInstance",{processInstanceId:decodeURI(e)},"GET").then(function(e){return t.setState({processImgData:e.resultData?e.resultData:{}})})}},{key:"instanceDiagramData",value:function(e){var t=this;Object(D["d"])("/task/instanceDiagramData",{processInstanceId:decodeURI(e)},"GET").then(function(e){t.setState({imgData:e.resultData})})}},{key:"submit",value:function(){this.state.rejected?this.state.rejected&&this.submitForReject():"start"===this.state.from||"draft"===this.state.from?this.submitForStart():"todo"===this.state.from&&this.submitForTodo()}},{key:"submitForReject",value:function(){var e=this,t=this.formDesignRender.props.form,a=t.getFieldsValue();for(var r in a)a.hasOwnProperty(r)&&a[r]instanceof Z["EditorState"]&&(a[r]=a[r].toHTML());var n={formDatas:a,id:this.state.taskId,formId:this.state.formId,formType:this.state.formType,commentId:this.state.commentId,userId:this.state.userId};Object(D["d"])("/task/completeRejectTask",n).then(function(){return e.goBack()})}},{key:"submitForStart",value:function(){var e=this,t=this.formDesignRender.props.form;t.validateFieldsAndScroll(function(t,a){if(!t){for(var r in a)a.hasOwnProperty(r)&&a[r]instanceof Z["EditorState"]&&(a[r]=a[r].toHTML());var n={formDatas:a,processDefinitionId:e.state.processDefinitionId,formId:e.state.formId,formType:e.state.formType,draftId:e.state.draftId,userId:e.state.userId};Object(D["d"])("/process/startProcessByForm",n).then(function(){return e.goBack()})}})}},{key:"submitForTodo",value:function(){var e=this,t=this.formDesignRender.props.form;if(this.state.startFlag){var a=t.getFieldsValue();for(var r in a)a.hasOwnProperty(r)&&a[r]instanceof Z["EditorState"]&&(a[r]=a[r].toHTML());var n={formDatas:a,id:this.state.taskId,formId:this.state.formId,formType:this.state.formType,commentId:this.state.commentId,userId:this.state.userId};Object(D["d"])("/task/completeTask",n).then(function(){return e.goBack()})}else t.validateFieldsAndScroll(function(t,a){t||e.setState({visibleForSubmit:!0})})}},{key:"save",value:function(){"start"!==this.state.from&&"draft"!==this.state.from||this.saveForStart(),"todo"===this.state.from&&this.saveForTodo()}},{key:"saveForStart",value:function(){var e=this,t=this.formDesignRender.props.form;t.validateFieldsAndScroll(function(t,a){if(!t){for(var r in a)a.hasOwnProperty(r)&&a[r]instanceof Z["EditorState"]&&(a[r]=a[r].toHTML());var n={formDatas:a,processDefinitionId:e.state.processDefinitionId,formId:e.state.formId,formType:e.state.formType,draftId:e.state.draftId,userId:e.state.userId};Object(D["d"])("/process/saveProcessDraft",n).then(function(t){s["a"].success("\u4fdd\u5b58\u6210\u529f"),e.setState({draftId:t.resultData})})}})}},{key:"saveForTodo",value:function(){var e=this,t=this.formDesignRender.props.form;t.validateFieldsAndScroll(function(t,a){if(!t){for(var r in a)a.hasOwnProperty(r)&&a[r]instanceof Z["EditorState"]&&(a[r]=a[r].toHTML());var n={formDatas:a,id:e.state.taskId,formId:e.state.formId,formType:e.state.formType,userId:e.state.userId};Object(D["d"])("/task/saveTaskFormData",n).then(function(){return s["a"].success("\u4fdd\u5b58\u6210\u529f")})}})}},{key:"goBack",value:function(){window.postMessage("updateTableList",window.location.origin),window.close()}},{key:"onOkProcessTodoSubmitForm",value:function(){var e=this,t=this.processTodoSubmitForm.props.form;t.validateFieldsAndScroll(function(t,a){if(!t){a.comment=a.comment.toHTML();var r=e.formDesignRender.props.form.getFieldsValue();for(var n in r)r.hasOwnProperty(n)&&r[n]instanceof Z["EditorState"]&&(r[n]=r[n].toHTML());var o=c()({},a,{formDatas:r,id:e.state.taskId,formId:e.state.formId,formType:e.state.formType,commentId:e.state.commentId,userId:e.state.userId});Object(D["d"])("/task/completeTask",o).then(function(){return e.goBack()})}})}},{key:"onOkProcessTodoRollbackForm",value:function(e){var t=this,a={currentTaskId:this.state.taskId,userId:this.state.userId};if("rollback2last"!==e){var r=this.processTodoRollbackForm.props.form;r.validateFieldsAndScroll(function(e,r){e||Object(D["d"])("/task/rollbackToDesTask",c()({},a,r)).then(function(){return t.goBack()})})}else Object(D["d"])("/task/rollbackToDesTask",a).then(function(){return t.goBack()})}},{key:"onOkProcessHandoverForm",value:function(){var e=this,t=this.processTodoHandoverForm.props.form;t.validateFieldsAndScroll(function(t,a){if(!t){var r=c()({taskId:e.state.taskId},a);Object(D["d"])("/task/handover",r).then(function(){return e.goBack()})}})}},{key:"onOkProcessCarbonCopyForm",value:function(){var e=this,t=this.processTodoCarbonCopyForm.props.form;t.validateFieldsAndScroll(function(t,a){t||Object(D["d"])("/task/cc?taskId=".concat(e.state.taskId),a.delegateUserId).then(function(){return e.goBack()})})}},{key:"onOkProcessAssistForm",value:function(){var e=this,t=this.processTodoAssistForm.props.form;t.validateFieldsAndScroll(function(t,a){t||Object(D["d"])("/task/assist?taskId=".concat(e.state.taskId,"&assistUserId=").concat(a.delegateUserId)).then(function(){return e.goBack()})})}},{key:"onOkProcessRejectForm",value:function(e){var t=this;if("submit2InputActivity"===e){var a=this.processTodoRejectForm.props.form;a.validateFieldsAndScroll(function(e,a){e||Object(D["d"])("/task/rejectToStart?taskId=".concat(t.state.taskId,"&rejectSubmitActId=").concat(a.desActivityId)).then(function(){return t.goBack()})})}else Object(D["d"])("/task/rejectToStart?taskId=".concat(this.state.taskId)).then(function(){return t.goBack()})}},{key:"recall",value:function(){var e=this,t=this.state,a=t.activityId,r=t.processInstanceId;Object(D["d"])("/task/recallTask",{activityId:a,processInstanceId:r}).then(function(){return e.goBack()})}},{key:"handleMenuClick",value:function(e){"rollBack"===e.key?this.setState({visibleForRollback:!0}):"handover"===e.key?this.setState({visibleForHandover:!0}):"carbonCopy"===e.key?this.setState({visibleForCarbonCopy:!0}):"assist"===e.key?this.setState({visibleForAssist:!0}):"reject"===e.key&&this.setState({visibleForReject:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.formType,s=t.title,i=t.activeKey,c=t.from,l=t.startFlag,m=t.canRevocation,d=t.processInstanceId,u=t.cc,p=t.assistStrategy,f=t.rejectStrategy,h=t.handover,v=t.rollbackStrategy,y=t.visibleApproval,b=t.approvalData,g="submit2InputActivity"!==f?I.a.createElement(I.a.Fragment,null,I.a.createElement("span",null,"\u786e\u8ba4\u9a73\u56de\u5230\u5f00\u59cb\u8282\u70b9?"),I.a.createElement("br",null),I.a.createElement("span",null,"\uff08\u5f53\u524d\u9a73\u56de\u7b56\u7565\u4e3a",te["a"].rejectStrategy[f],"\uff09")):I.a.createElement(se,{taskId:this.state.taskId,wrappedComponentRef:function(t){return e.processTodoRejectForm=t},type:"\u9a73\u56de",rejectStrategy:f}),D="rollback2last"===v?"\u786e\u8ba4\u9000\u56de\u5230\u4e0a\u4e2a\u8282\u70b9\uff1f":I.a.createElement(se,{taskId:this.state.taskId,wrappedComponentRef:function(t){return e.processTodoRollbackForm=t},type:"\u9000\u56de"});return I.a.createElement(k["Fragment"],null,1===a&&I.a.createElement("iframe",{title:"\u5916\u90e8\u8868\u5355",style:{border:"none"},sandbox:"allow-forms allow-same-origin allow-scripts",height:"".concat(window.innerHeight,"px"),width:"".concat(window.innerWidth,"px"),scrolling:"no",src:this.state.componentData}),0===a&&I.a.createElement(k["Fragment"],null,I.a.createElement("div",{id:"processDetailHeader"},I.a.createElement(J,{title:s,activeKey:i,from:c,startFlag:l,canRevocation:m,processInstanceId:d,tabClick:this.tabClick.bind(this),submit:this.submit.bind(this),save:this.save.bind(this),recall:this.recall.bind(this),goBack:this.goBack.bind(this),handleMenuClick:this.handleMenuClick.bind(this),cc:u,assistStrategy:p,rejectStrategy:f,handover:h,rollbackStrategy:v,approval:this.approval})),I.a.createElement(n["a"],{activeKey:i,renderTabBar:function(){return I.a.createElement("div",null)}},I.a.createElement(n["a"].TabPane,{key:"0",tab:"\u6d41\u7a0b\u8868\u5355"},I.a.createElement(o["a"],{type:"flex",justify:"center"},I.a.createElement(S["a"],{wrappedComponentRef:function(t){return e.formDesignRender=t},componentData:this.state.componentData,formData:this.state.formData,readOnly:"detail"===c||"carbonCopyDetail"===c}))),I.a.createElement(n["a"].TabPane,{key:"1",tab:"\u6d41\u7a0b\u56fe",forceRender:!0},I.a.createElement(o["a"],{type:"flex",justify:"center"},I.a.createElement("div",{style:{overflowX:"auto"},id:"imageParent"})))),I.a.createElement(r["a"],{title:"\u6d41\u7a0b\u5ba1\u6279",maskClosable:!1,destroyOnClose:!0,width:800,visible:this.state.visibleForSubmit,onOk:this.onOkProcessTodoSubmitForm.bind(this),onCancel:function(){return e.setState({visibleForSubmit:!1})}},I.a.createElement($,{wrappedComponentRef:function(t){return e.processTodoSubmitForm=t}})),I.a.createElement(r["a"],{title:"\u6d41\u7a0b\u9000\u56de",maskClosable:!1,destroyOnClose:!0,visible:this.state.visibleForRollback,onOk:this.onOkProcessTodoRollbackForm.bind(this,v),onCancel:function(){return e.setState({visibleForRollback:!1})}},D),I.a.createElement(r["a"],{title:"\u6d41\u7a0b\u79fb\u4ea4",maskClosable:!1,destroyOnClose:!0,visible:this.state.visibleForHandover,onOk:this.onOkProcessHandoverForm.bind(this),onCancel:function(){return e.setState({visibleForHandover:!1})}},I.a.createElement(re,{wrappedComponentRef:function(t){return e.processTodoHandoverForm=t},type:"\u79fb\u4ea4"})),I.a.createElement(r["a"],{title:"\u6d41\u7a0b\u6284\u9001",maskClosable:!1,destroyOnClose:!0,visible:this.state.visibleForCarbonCopy,onOk:this.onOkProcessCarbonCopyForm.bind(this),onCancel:function(){return e.setState({visibleForCarbonCopy:!1})}},I.a.createElement(re,{wrappedComponentRef:function(t){return e.processTodoCarbonCopyForm=t},type:"\u6284\u9001"})),I.a.createElement(r["a"],{title:"\u6d41\u7a0b\u534f\u52a9",maskClosable:!1,destroyOnClose:!0,visible:this.state.visibleForAssist,onOk:this.onOkProcessAssistForm.bind(this),onCancel:function(){return e.setState({visibleForAssist:!1})}},I.a.createElement(re,{wrappedComponentRef:function(t){return e.processTodoAssistForm=t},type:"\u534f\u52a9",assistStrategy:p})),I.a.createElement(r["a"],{title:"\u6d41\u7a0b\u9a73\u56de",maskClosable:!1,destroyOnClose:!0,visible:this.state.visibleForReject,onOk:this.onOkProcessRejectForm.bind(this,f),onCancel:function(){return e.setState({visibleForReject:!1})}},g),I.a.createElement(ue,{visible:y,dataSource:b,onCancel:this.onCancelProcessApproval})))}}]),t}(k["Component"]);t["default"]=Object(g["connect"])(E["a"])(he)}}]);